<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Project Report</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="background.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="final_report.html">
    <span class="fa fa-newspaper fa-lg"></span>
     
    Project report
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://chenmo.shinyapps.io/Interactive_map/">
    <span class="fa fa-quidditch fa-lg"></span>
     
    Fantastic interactive plots
  </a>
</li>
<li>
  <a href="plot.html">
    <span class="fa fa-drafting-compass fa-lg"></span>
     
    fascinating gif plots
  </a>
</li>
<li>
  <a href="regression.html">
    <span class="fa fa-calculator fa-lg"></span>
     
    rigorous regression
  </a>
</li>
<li>
  <a href="https://github.com/cm4047/p8105_final_project.git/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Project Report</h1>

</div>


<div id="motiviation" class="section level1">
<h1>Motiviation</h1>
<p>It is undoubtedly that there are numerous of people are living in extreme poverty, and this also happened to the United States. One noticeable situation is that people with college or higher degrees are tend to earn more than others. Besides, one of the major social issues in the United States is the inequality in the higher education, and thus the college attendance rate really matters for reducing poverty in the United States. So our team is trying to find the relevant factors which influence the college attendance rate in the United States.</p>
</div>
<div id="related-work" class="section level1">
<h1>Related Work</h1>
<p>The following resources are a sample of what inspired this project.</p>
<ul>
<li>“The College Enrollment Rate of ACT-Tested Students Remains Stable” <em>ACT Research</em>, 2014. <a href="http://www.act.org/content/act/en/research/reports/act-publications/college-choice-report-class-of-2014/enrollment/college-enrollment-rate.html">Link.</a></li>
<li>“College Enrollment Rates” <em>The National Center for Education Statistics (NCES)</em>, May, 2020. <a href="https://nces.ed.gov/programs/coe/indicator_cpb.asp">Link.</a></li>
<li>“College Enrollment &amp; Student Demographic Statistics” <em>EDUCATIONDATA.ORG</em>, June 7, 2019. <a href="https://educationdata.org/college-enrollment-statistics">Link.</a></li>
<li>“Is Your State Prioritizing TEACHER DIVERSITY &amp; EQUITY?” <em>The Education Trust</em> <a href="https://edtrust.org/">Link.</a></li>
<li>“It’s Time to Worry About College Enrollment Declines Among Black Students” <em>Center for American Progress</em>, September 28, 2020. <a href="https://www.americanprogress.org/issues/education-postsecondary/reports/2020/09/28/490838/time-worry-college-enrollment-declines-among-black-students/">Link.</a></li>
<li>College enrollment rate. <em>USAFACTS</em>. <a href="https://usafacts.org/data/topics/people-society/education/higher-education/college-enrollment-rate/">Link.</a></li>
</ul>
</div>
<div id="initial-questions" class="section level1">
<h1>Initial questions</h1>
<p>Our initial goal is to investigated the association between college attendance rate and different factors. To be more specifically, we are interested in the trend of college attendance rate among different groups and to see if there is discrimination. Our questions are as follows: * Any association between different income groups and the college attendance rate?<br />
* Any association between geography (states and if from an urban) and the college attendance rate? * Any association between races and the college attendance rate?<br />
* Any association between different income groups and the school type?<br />
* What are the important variables if we do a multiple linear regression? * How can we predict and visualize the college attendance rate among different groups?</p>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<p>The dataset we are using is IMPUS which provides census and survey data from around the world integrated across time and space.</p>
<p>Since we were interested in the college attendance rate, we filtered the dataset to only include age between 18 to 24 years old. Besides, we only keep part of the original dataset because it is too big, and the final cleaned data has around 120,000 rows.</p>
<p>We considered people who were currently enrolled in the college (including students who take a gap year from the university) or have graduated from the college before as the numerator of the college attendance rate.</p>
<p>Factors that we are interested in:</p>
<ul>
<li>year: Census year<br />
</li>
<li>age: Age</li>
<li>states: States abbreviation<br />
</li>
<li>race: Race<br />
</li>
<li>number_of_children: Number of own children in the household<br />
</li>
<li>college_attendance_status: if one is enrolled in the college<br />
</li>
<li>school_type: Public or Private school<br />
</li>
<li>anually_family_income: Total anually family income # Interactive Plot</li>
</ul>
<div id="interactive-plot-of-college-attendance-rate" class="section level3">
<h3>Interactive Plot of College Attendance Rate</h3>
<p>Given the collection of all available college attendance data, we are allowed to integrate a bunch of interactive plots.</p>
<p><img src="interactive1.png" /></p>
<p>On the first tab <em>College Attendance Rate Over Time</em>, first of all, we can see the trend of the college attendance rate in the New York city for all races from 2008 to 2018, all metropolitan status, and all family income range; If we click <em>Select State</em> on the left side bar, it goes further into more specific geographical locations. If we click <em>Select Race</em> on the left, we are allowed to know further information about the college attendance rate for a specific race. If we slide <em>Annual Family Income</em> bar on the left, it gives the college attendance rate for detailed family income range. For the checkbox on the left, we’re allowed to filter acoording to types of metropolitan status: mixed of metropolitan status, in metropolitan, and not in metropolitan area.</p>
</div>
<div id="college-attendance-rate-map" class="section level3">
<h3>College Attendance Rate Map</h3>
<p>We also build a interactive map which allows users to toggle between different years (2008-2018), visualizing regional differences across the U.S.</p>
<p><img src="interactive2.png" /></p>
<p>By click <em>Choose year</em>, it goes further into more specific geographic locations for one specific year.</p>
</div>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory Analysis</h1>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>In the exploratory analysis section, to take a deeper look at the college attendance rate, we plot the trend of overall college attendance rate across time and the college attendance rate stratified by metropolitan status, states, income, race, number of children. We also plot the proportion of different type of school across people with different incomes.</p>
</div>
<div id="college-attendance-rate-over-time" class="section level2">
<h2>College attendance rate over time</h2>
<p>The line chart shows the overall trend of college attendance rate of USA from 2008 to 2018. The college attendance rate was mainly increasing while it experienced two declines, one in 2009 and the other in 2016. In 2010, the overall college attendance rate saw its biggest growth.</p>
<pre class="r"><code>data_cleaned &lt;- read.csv(&quot;./data/cleaned.csv&quot;)

rate_year &lt;- data_cleaned %&gt;%
        group_by(year) %&gt;%
        summarize(rate = length(which(college_attendance_status==&quot;Yes&quot;))/n())</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre class="r"><code>pyear = ggplot(rate_year, aes(x=year, y=rate)) +
        geom_line() +
        geom_point() +
        labs(title = &quot;Trend Over Time&quot;, x=&quot;Year&quot;, y= &quot;College Attendence Rate&quot;) +
        scale_x_continuous(breaks = seq(2008, 2018, 2)) +
        transition_reveal(year)
animate(pyear, duration = 5, fps = 20, width = 400, height = 400, renderer = gifski_renderer())</code></pre>
<p><img src="final_report_files/figure-html/rate-year-1.gif" width="90%" /></p>
</div>
<div id="college-attendance-rate-by-metropolitan" class="section level2">
<h2>College attendance rate by Metropolitan</h2>
<p>The chart shows college attendance rate from 2008-2018, by metropolitan status. People in metropolitan and central city had the highest college attendance rate, while people not in metropolitan area had the lowest college attendance rate.</p>
<pre class="r"><code>rate_city &lt;- data_cleaned %&gt;%
        group_by(year, metropolitan_status) %&gt;%
        summarize(rate = length(which(college_attendance_status==&quot;Yes&quot;))/n())</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;year&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>        # pivot_wider(names_from =metropolitan_status, values_from = rate)

pcity = ggplot(rate_city, aes(x=year, y=rate, color = metropolitan_status)) +
        geom_line() +
        geom_point() +
        scale_x_continuous(breaks = seq(2008, 2018, 2)) + 
        labs(title = &quot;Trend Over Time by Metropolitan&quot;, x=&quot;Year&quot;, y= &quot;College Attendence Rate&quot;) +
        transition_reveal(year)
animate(pcity, duration = 5, fps = 20, width = 600, height = 400, renderer = gifski_renderer())</code></pre>
<p><img src="final_report_files/figure-html/byCity-1.gif" width="90%" /></p>
<pre class="r"><code># plot_ly(rate_city, x=~year, y=~`in metropolitan and central city`, name = &quot;in metropolitan and central city&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`in metropolitian but mixed of central city`, name = &quot;in metropolitian but mixed of central city&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`in metropolitian but not in central city`, name = &quot;in metropolitian but not in central city&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`mixed of metropolitian status`, name = &quot;mixed of metropolitian status&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`Not in metropolitan area`, name = &quot;Not in metropolitan area&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;)# plot_ly(rate_city, x=~year, y=~`in metropolitan and central city`, name = &quot;in metropolitan and central city&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`in metropolitian but mixed of central city`, name = &quot;in metropolitian but mixed of central city&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`in metropolitian but not in central city`, name = &quot;in metropolitian but not in central city&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`mixed of metropolitian status`, name = &quot;mixed of metropolitian status&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`Not in metropolitan area`, name = &quot;Not in metropolitan area&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;)</code></pre>
</div>
<div id="college-attendance-rate-by-state" class="section level2">
<h2>College attendance rate by State</h2>
<p>The chart shows the changes of the ranking of different states across time. Generally, the top 5 states with the highest college attendance rate were DC, NJ, CT, MA and VT, all higher than 0.5.The top 5 states with the lowest college attendance rate were AK, OK, NV, LA and AZ, all lower than 0.38.</p>
<pre class="r"><code>rate_state &lt;- data_cleaned %&gt;%
        group_by(year, states) %&gt;%
        summarize(rate = length(which(college_attendance_status==&quot;Yes&quot;))/n()) %&gt;%
        mutate(rank = min_rank(-rate)) %&gt;%
        ungroup()</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;year&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>        # pivot_wider(names_from =metropolitan_status, values_from = rate)

pstate &lt;-ggplot(rate_state,aes(rank,group=states,fill=as.factor(states),color=as.factor(states))) +
 geom_tile(aes(y = rate/2,height = rate, width = 0.9), alpha = 0.8, color = NA) +
 geom_text(aes(y = 0, label = paste(states, &#39; &#39;)), vjust = 0.2, hjust = 1) +
 geom_text(aes(y=rate,label = paste(&#39; &#39;,rate)), hjust=0)+
 coord_flip(clip = &#39;off&#39;, expand = TRUE) +
 scale_y_continuous(labels = scales::comma) +
 scale_x_reverse() +
 guides(color = FALSE, fill = FALSE) +
 theme_minimal() +
 theme(
 plot.title=element_text(size=25, hjust=0.5, face=&#39;bold&#39;, colour=&#39;grey&#39;, vjust=-1),
 plot.subtitle=element_text(size=18, hjust=0.5, face=&#39;italic&#39;, color=&#39;grey&#39;),
 plot.caption =element_text(size=8, hjust=0.5, face=&#39;italic&#39;, color=&#39;grey&#39;),
 axis.ticks.y = element_blank(), 
 axis.text.y = element_blank(), 
 plot.margin = margin(1,1,1,4, &#39;cm&#39;)
 )


pstate &lt;- pstate + transition_states(states = year, transition_length = 4, state_length = 1) + 
 ease_aes(&#39;cubic-in-out&#39;) +
 labs(title = &#39;College Attendance Rate per Year : {closest_state}&#39;, 
 x=&#39;&#39;,y=&#39;Total Suicides per year&#39;)

animate(pstate,fps = 20,duration = 30, width = 950, height = 750, renderer = gifski_renderer())</code></pre>
<p><img src="final_report_files/figure-html/byState-1.gif" width="90%" /></p>
<pre class="r"><code># 
# pstate = ggplot(rate_state, aes(x=rank, y=rate, color = states)) +
#         geom_tile(aes(y = rank, height = rate, width = .9, color = NA))+
#         geom_text(aes(y = 0, label = paste(states, &#39; &#39;)), vjust = 0.2, hjust = 1) +
#  geom_text(aes(y=rate,label = paste(&#39; &#39;,rate)), hjust=0)+
#         coord_flip(clip = &#39;off&#39;, expand = TRUE) +
#         scale_y_continuous(labels = scales::comma) + 
#         scale_x_reverse() +
#         guides(color = FALSE, fill = FALSE) +
#         labs(title = &quot;College Attendance Rate by State&quot;, y=&quot;Year&quot;, x= &quot;College Attendence Rate&quot;)
#         transition_reveal(year)
#         
# pstate</code></pre>
</div>
<div id="college-attendance-rate-by-income" class="section level2">
<h2>College attendance rate by Income</h2>
<p>The chart shows college attendance rate from 2008-2018, by income. High income families have the highest college attendance rate until 2015, when low income families surpassed them. Families with middle income had lowest college attendance rate during the whole time period and was the main reason the overall college attendance rate dropped in 2016.</p>
<pre class="r"><code>data_omitna &lt;- na.omit(data_cleaned)
rate_income &lt;-  data_omitna%&gt;%
                mutate(income = car::recode(`anually_family_income`, &quot;lo:20000 = &#39;low&#39;;94500:hi=&#39;high&#39;;else = &#39;middle&#39;&quot;)) %&gt;%
        # mutate(income = car::recode(`anually_family_income`, &quot;lo:median(data_omitna$anually_family_income)*0.3 = &#39;low&#39;;median(data_omitna$anually_family_income)*2:hi=&#39;high&#39;;else = &#39;middle&#39;&quot;)) %&gt;%
        group_by(year, income) %&gt;%
        summarize(rate = length(which(college_attendance_status==&quot;Yes&quot;))/n())</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;year&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>        # pivot_wider(names_from =income, values_from = rate)

pincome = ggplot(rate_income, aes(x=year, y=rate, color = income)) +
        geom_line() +
        geom_point() +
        scale_x_continuous(breaks = seq(2008, 2018, 2)) + 
        labs(title = &quot;Trend Over Time by Income&quot;, x=&quot;Year&quot;, y= &quot;College Attendence Rate&quot;) +
        transition_reveal(year)
animate(pincome, duration = 5, fps = 20, width = 600, height = 400, renderer = gifski_renderer())</code></pre>
<p><img src="final_report_files/figure-html/byIncome-1.gif" width="90%" /></p>
<pre class="r"><code># plot_ly(rate_income, x=~year, y=~`high`, name = &quot;high income&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`middle`, name = &quot;middle income&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`low`, name = &quot;low income&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;)</code></pre>
</div>
<div id="college-attendance-rate-by-race" class="section level2">
<h2>College attendance rate by Race</h2>
<p>The chart shows college attendance rate from 2008-2018, by race. Generally, Chinese had the highest college attendance rate, followed by other Asian or Pacific islanders and white people. American Indian of Alaska native had the lowest college attendance rate. The college attendance rate of Japanese increased rapidly before 2012 and had a dramatic drop in 2017.</p>
<pre class="r"><code>rate_race &lt;- data_cleaned %&gt;%
        group_by(year, race) %&gt;%
        summarize(rate = length(which(college_attendance_status==&quot;Yes&quot;))/n())</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;year&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>        # pivot_wider(names_from =race, values_from = rate)

prace = ggplot(rate_race, aes(x=year, y=rate, color = race)) +
        geom_line() +
        geom_point() +
        scale_x_continuous(breaks = seq(2008, 2018, 2)) + 
        labs(title = &quot;Trend Over Time by Race&quot;, x=&quot;Year&quot;, y= &quot;College Attendence Rate&quot;) +
        transition_reveal(year)
animate(prace, duration = 5, fps = 20, width = 600, height = 400, renderer = gifski_renderer())</code></pre>
<p><img src="final_report_files/figure-html/byRace-1.gif" width="90%" /></p>
<pre class="r"><code># plot_ly(rate_race, x=~year, y=~`White`, name = &quot;White&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`African American`, name = &quot;African American&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`American Indian or Alaska Native`, name = &quot;American Indian or Alaska Native&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`Other Asian or Pacific Islander`, name = &quot;Other Asian or Pacific Islander&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`Chinese`, name = &quot;Chinese&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`Japanese`, name = &quot;Japanese&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`Others`, name = &quot;others&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;)</code></pre>
</div>
<div id="college-attendance-rate-by-number-of-children" class="section level2">
<h2>College attendance rate by Number Of Children</h2>
<p>The chart shows college attendance rate from 2008-2018, by the number of children in the family. Generally, the more children in the family, the lower the college attendance rate.</p>
<pre class="r"><code> rate_noc &lt;-  data_omitna%&gt;%
                mutate(noc = car::recode(`number_of_children`, &quot;0 = &#39;0&#39;; 1:2 = &#39;1-2&#39;;3:hi=&#39;3+&#39;&quot;)) %&gt;%
        group_by(year, noc) %&gt;%
        summarize(rate = length(which(college_attendance_status==&quot;Yes&quot;))/n())</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;year&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>        # pivot_wider(names_from =noc, values_from = rate)

pnoc = ggplot(rate_noc, aes(x=year, y=rate, color = noc)) +
        geom_line() +
        geom_point() +
        scale_x_continuous(breaks = seq(2008, 2018, 2)) + 
        labs(title = &quot;Trend Over Time by Number of Children&quot;, x=&quot;Year&quot;, y= &quot;College Attendence Rate&quot;) +
        transition_reveal(year)
animate(pnoc, duration = 5, fps = 20, width = 600, height = 400, renderer = gifski_renderer())</code></pre>
<p><img src="final_report_files/figure-html/byNumberOfChildren-1.gif" width="90%" /></p>
<pre class="r"><code># plot_ly(rate_noc, x=~year, y=~`0`, name = &quot;0 children&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`1-2`, name = &quot;1-2 children&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`3+`, name = &quot;3+ children&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;)
# rate_noc$frame = rate_noc$year
# plot_ly(rate_noc, x = ~year, y = ~rate, split = ~noc, frame = ~frame, type = &#39;scatter&#39;, mode = &#39;lines&#39;, line = list(simplyfy = F)) 
        # animation_opts(frame = 100, transition = 0, redraw = FALSE) %&gt;%
        # animation_slider(hide = T) %&gt;% 
        # animation_button(x = 1, xanchor = &quot;right&quot;, y = 0, yanchor = &quot;bottom&quot;)</code></pre>
</div>
<div id="college-attendance-rate-by-type-of-school" class="section level2">
<h2>College attendance rate by Type Of School</h2>
<p>The chart shows proportion of different type of school across people with different incomes from 2008 to 2018. High income people had relatively higher percentage of entering private school and relatively lower rate of non-enrollment among all people.</p>
<pre class="r"><code>n_school &lt;- data_omitna %&gt;%
        mutate(income = car::recode(`anually_family_income`, &quot;lo:20000 = &#39;low&#39;;94500:hi=&#39;high&#39;;else = &#39;middle&#39;&quot;),
               income = factor(income, levels = c(&quot;low&quot;,&quot;middle&quot;,&quot;high&quot;)))
school_incomee = 
        n_school %&gt;% 
        group_by(year, income) %&gt;%
        summarize(income_group = n()) </code></pre>
<pre><code>## `summarise()` regrouping output by &#39;year&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>school_typee = 
        n_school %&gt;% 
        group_by(year, income, school_type) %&gt;% 
        summarize(number = n()) %&gt;% 
        left_join(school_incomee, by = c(&quot;year&quot;,&quot;income&quot;)) %&gt;% 
        mutate(percentage = 100*number/income_group)</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;income&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>plot_ly(school_typee, x=~year, y = ~percentage, color = ~school_type, frame = ~income, type = &quot;scatter&quot;, mode = &quot;line&quot;)</code></pre>
<pre><code>## Warning: `arrange_()` is deprecated as of dplyr 0.7.0.
## Please use `arrange()` instead.
## See vignette(&#39;programming&#39;) for more help
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_warnings()` to see where this warning was generated.</code></pre>
<div id="htmlwidget-f843a680a1fcd62a0dd1" style="width:90%;height:691.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f843a680a1fcd62a0dd1">{"x":{"visdat":{"9d713ec6a30":["function () ","plotlyVisDat"]},"cur_data":"9d713ec6a30","attrs":{"9d713ec6a30":{"x":{},"y":{},"mode":"line","color":{},"frame":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year","range":[2007.5,2018.5]},"yaxis":{"domain":[0,1],"automargin":true,"title":"percentage","range":[2.45169968207386,62.5764245536806]},"hovermode":"closest","showlegend":true,"sliders":[{"currentvalue":{"prefix":"income: ","xanchor":"right","font":{"size":16,"color":"rgba(204,204,204,1)"}},"steps":[{"method":"animate","args":[["low"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"low","value":"low"},{"method":"animate","args":[["middle"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"middle","value":"middle"},{"method":"animate","args":[["high"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"high","value":"high"}],"visible":true,"pad":{"t":40}}],"updatemenus":[{"type":"buttons","direction":"right","showactive":false,"y":0,"x":0,"yanchor":"top","xanchor":"right","pad":{"t":60,"r":5},"buttons":[{"label":"Play","method":"animate","args":[null,{"fromcurrent":true,"mode":"immediate","transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false}}]}]}]},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[49.4758064516129,51.7406962785114,51.7633674630262,51.3483146067416,50.2601040416166,50.2783725910064,51.018711018711,49.9770747363595,50.3153808830665,47.4986835176409,47.2936030617824],"mode":"line","frame":"low","type":"scatter","name":"Not enrolled","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[9.55645161290323,9.60384153661465,8.6841107318923,7.52808988764045,9.12364945978391,8.13704496788008,9.3970893970894,8.71160018340211,9.94662785055798,10.5318588730911,12.0831055221432],"mode":"line","frame":"low","type":"scatter","name":"Private school","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[40.9677419354839,38.6554621848739,39.5525218050815,41.123595505618,40.6162464985994,41.5845824411135,39.5841995841996,41.3113250802384,39.7379912663755,41.969457609268,40.6232914160744],"mode":"line","frame":"low","type":"scatter","name":"Public school","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","visible":true}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"frames":[{"name":"low","data":[{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[49.4758064516129,51.7406962785114,51.7633674630262,51.3483146067416,50.2601040416166,50.2783725910064,51.018711018711,49.9770747363595,50.3153808830665,47.4986835176409,47.2936030617824],"mode":"line","frame":"low","type":"scatter","name":"Not enrolled","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[9.55645161290323,9.60384153661465,8.6841107318923,7.52808988764045,9.12364945978391,8.13704496788008,9.3970893970894,8.71160018340211,9.94662785055798,10.5318588730911,12.0831055221432],"mode":"line","frame":"low","type":"scatter","name":"Private school","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[40.9677419354839,38.6554621848739,39.5525218050815,41.123595505618,40.6162464985994,41.5845824411135,39.5841995841996,41.3113250802384,39.7379912663755,41.969457609268,40.6232914160744],"mode":"line","frame":"low","type":"scatter","name":"Public school","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2]},{"name":"middle","data":[{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[56.7374479063306,56.982496194825,55.4744525547445,54.6966098034982,55.7550843790567,55.8635863586359,58.7276431967399,58.3277442432372,57.6162097735399,57.0871894788115,59.8434825140621],"mode":"line","frame":"middle","type":"scatter","name":"Not enrolled","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[6.72752530263941,6.58295281582953,6.30042258932002,6.71561217879508,5.88489831241887,6.68866886688669,6.11274620783337,5.41023921305611,7.03218116805721,5.89381393083293,5.18464172169235],"mode":"line","frame":"middle","type":"scatter","name":"Private school","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[36.53502679103,36.4345509893455,38.2251248559355,38.5877780177068,38.3600173085244,37.4477447744774,35.1596105954268,36.2620165437067,35.3516090584029,37.0189965903556,34.9718757642455],"mode":"line","frame":"middle","type":"scatter","name":"Public school","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2]},{"name":"high","data":[{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[38.6569091691778,38.0439868975199,36.9257950530035,40.3884462151394,39.6182495344507,44.7380206000896,42.0303169499311,44.062106588334,42.1117502054232,44.1768653770233,45.0757575757576],"mode":"line","frame":"high","type":"scatter","name":"Not enrolled","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[12.3116659492036,13.4300421151146,11.7049469964664,13.0478087649402,11.9180633147114,10.1656963725929,11.1162149747359,9.98741082668905,11.6269515201315,9.4749309119621,10.4545454545455],"mode":"line","frame":"high","type":"scatter","name":"Private school","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[49.0314248816186,48.5259709873655,51.36925795053,46.5637450199203,48.463687150838,45.0962830273175,46.853468075333,45.9504825849769,46.2612982744454,46.3482037110146,44.469696969697],"mode":"line","frame":"high","type":"scatter","name":"Public school","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2]}],"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># plot_ly(rate_school, x=~year, y=~`Private school`, name = &quot;Private school&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`Public school`, name = &quot;Public school&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;) %&gt;%
#         add_trace(y=~`Not enrolled`, name = &quot;Not enrolled&quot;, type = &quot;scatter&quot;, mode = &quot;line&quot;)</code></pre>
</div>
</div>
<div id="statistical-analysis" class="section level1">
<h1>Statistical Analysis</h1>
<div id="overview-1" class="section level3">
<h3>Overview</h3>
<p>In the <a href="regression.html">regression analysis</a>, we mainly focus on finding associations between the college attendance rate and several factors, including income, race, city type, and the number of children.</p>
<p>First, we plotted several bar graphs showing the data compositions under each variable of interest, and found out there was not too much variance of data distribution across years.</p>
<p>Then, a correlation matrix was generated to see if there exists multicollinearity between covariates. Considering the “chaos” in the distribution of outcome values (meaning our data did not follow a certain distribution), we have tried different models to fit in our full dataset, but the results were unsatisfactory.</p>
<p>Thus, we switched back to linear regression models but awared of potential inaccuracy and bias of results. We also did stratified analysis based on race (African Americans vs Non-African Ameircans).</p>
<p>In addition, we applied model diagnostics to evaluate model assumptions and check influential effects. Given the diagnostics, a linear regression used logit transformation was included in the end to meet assumptions but modeled with filtered dataset.</p>
</div>
<div id="correlation-matrix" class="section level3">
<h3>Correlation Matrix</h3>
<p><img src="final_report_files/figure-html/unnamed-chunk-2-1.png" width="90%" /></p>
<p><strong>Findings:</strong> From the correlation matrix, it could be observed that the correlation between any two subgroups of predictors is less than 0.3, indicating there is a weak or no correlation between covariates and less likely to have multicollinearity. The predictors tend to be independent of each other. Values less than 0 indicate a negative correlation; values greater than 0 indicate a positive correlation.</p>
</div>
<div id="modeling" class="section level3">
<h3>Modeling</h3>
<p>Linear regression model fitting all data points:</p>
<p><span class="math display">\[ \hat{percent} = \beta_0 + \beta_1income + \beta_2race + \beta_3city + \beta_4noc\]</span></p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">49.138</td>
<td align="right">0.217</td>
<td align="right">226.841</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">income</td>
<td align="right">-0.097</td>
<td align="right">0.013</td>
<td align="right">-7.288</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Race:African American</td>
<td align="right">-10.492</td>
<td align="right">0.328</td>
<td align="right">-31.975</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Race:Others</td>
<td align="right">-10.398</td>
<td align="right">0.357</td>
<td align="right">-29.160</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Race:Asian/Pacific</td>
<td align="right">9.293</td>
<td align="right">0.536</td>
<td align="right">17.340</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Race:Chinese</td>
<td align="right">20.279</td>
<td align="right">0.878</td>
<td align="right">23.109</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Race:AmeInd/AK</td>
<td align="right">-14.267</td>
<td align="right">0.886</td>
<td align="right">-16.101</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Race:Japanese</td>
<td align="right">5.606</td>
<td align="right">2.735</td>
<td align="right">2.049</td>
<td align="right">0.040</td>
</tr>
<tr class="odd">
<td align="left">City:metro not central</td>
<td align="right">-1.595</td>
<td align="right">0.263</td>
<td align="right">-6.062</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">City:metro &amp; central</td>
<td align="right">6.016</td>
<td align="right">0.320</td>
<td align="right">18.817</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">City:non-metro</td>
<td align="right">-10.262</td>
<td align="right">0.342</td>
<td align="right">-30.045</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">City:mixed metro</td>
<td align="right">-8.361</td>
<td align="right">0.357</td>
<td align="right">-23.405</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">NOC:1</td>
<td align="right">-10.407</td>
<td align="right">0.396</td>
<td align="right">-26.288</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">NOC:2</td>
<td align="right">-18.572</td>
<td align="right">0.613</td>
<td align="right">-30.301</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">NOC:3</td>
<td align="right">-23.195</td>
<td align="right">1.181</td>
<td align="right">-19.634</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">NOC:4</td>
<td align="right">-23.666</td>
<td align="right">2.716</td>
<td align="right">-8.713</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">NOC:5</td>
<td align="right">-18.699</td>
<td align="right">6.245</td>
<td align="right">-2.994</td>
<td align="right">0.003</td>
</tr>
<tr class="even">
<td align="left">NOC:6</td>
<td align="right">-34.513</td>
<td align="right">18.732</td>
<td align="right">-1.842</td>
<td align="right">0.065</td>
</tr>
<tr class="odd">
<td align="left">NOC:7</td>
<td align="right">-37.531</td>
<td align="right">32.442</td>
<td align="right">-1.157</td>
<td align="right">0.247</td>
</tr>
<tr class="even">
<td align="left">NOC:9</td>
<td align="right">-38.655</td>
<td align="right">32.441</td>
<td align="right">-1.192</td>
<td align="right">0.233</td>
</tr>
</tbody>
</table>
<p><strong>Findings:</strong> The results of the multiple linear regression show there is a significant association between annually family income and college attendance rate, however, the interesting part is there is actually a negative effect on the college attendant rate, but if we look through the overall trend plot from <a href="plot.html">here</a> between income and college attendant rate, we can find that it should be a positive association, and thus we did 2 further regressions after stratifying the race in this section. However, the association between race groups of American Indian/Alaska Natives and attendance rate is not significant, compared to the White. In addition, for one unit increase in “city”, the estimated college attendance rate will decrease to some extent, adjusting for other predictors. For the predictor NOC, the significant association is only observed for the group of 1 or 2 children in the family.</p>
<div id="stratified-modeling-for-race-african-american" class="section level4">
<h4>Stratified modeling for Race: African American</h4>
<p><span class="math display">\[ \hat{percent} = \beta_0 + \beta_1income + \beta_2city + \beta_3noc\]</span></p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">34.531</td>
<td align="right">0.695</td>
<td align="right">49.707</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">income</td>
<td align="right">0.501</td>
<td align="right">0.066</td>
<td align="right">7.535</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">City:metro not central</td>
<td align="right">1.070</td>
<td align="right">0.925</td>
<td align="right">1.157</td>
<td align="right">0.247</td>
</tr>
<tr class="even">
<td align="left">City:metro &amp; central</td>
<td align="right">0.644</td>
<td align="right">0.868</td>
<td align="right">0.742</td>
<td align="right">0.458</td>
</tr>
<tr class="odd">
<td align="left">City:non-metro</td>
<td align="right">-5.485</td>
<td align="right">1.323</td>
<td align="right">-4.145</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">City:mixed metro</td>
<td align="right">-6.083</td>
<td align="right">1.363</td>
<td align="right">-4.465</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">NOC:1</td>
<td align="right">-1.051</td>
<td align="right">1.168</td>
<td align="right">-0.900</td>
<td align="right">0.368</td>
</tr>
<tr class="even">
<td align="left">NOC:2</td>
<td align="right">-6.066</td>
<td align="right">1.877</td>
<td align="right">-3.231</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">NOC:3</td>
<td align="right">-14.258</td>
<td align="right">3.179</td>
<td align="right">-4.485</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">NOC:4</td>
<td align="right">-2.726</td>
<td align="right">7.331</td>
<td align="right">-0.372</td>
<td align="right">0.710</td>
</tr>
<tr class="odd">
<td align="left">NOC:5</td>
<td align="right">-35.889</td>
<td align="right">25.877</td>
<td align="right">-1.387</td>
<td align="right">0.165</td>
</tr>
<tr class="even">
<td align="left">NOC:6</td>
<td align="right">-34.531</td>
<td align="right">36.592</td>
<td align="right">-0.944</td>
<td align="right">0.345</td>
</tr>
<tr class="odd">
<td align="left">NOC:7</td>
<td align="right">-40.259</td>
<td align="right">36.593</td>
<td align="right">-1.100</td>
<td align="right">0.271</td>
</tr>
</tbody>
</table>
</div>
<div id="stratified-modeling-for-race-non-african-american" class="section level4">
<h4>Stratified modeling for Race: Non-African American</h4>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">48.913</td>
<td align="right">0.215</td>
<td align="right">227.375</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">income</td>
<td align="right">-0.105</td>
<td align="right">0.014</td>
<td align="right">-7.745</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">City:metro not central</td>
<td align="right">-1.997</td>
<td align="right">0.275</td>
<td align="right">-7.248</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">City:metro &amp; central</td>
<td align="right">7.518</td>
<td align="right">0.348</td>
<td align="right">21.630</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">City:non-metro</td>
<td align="right">-10.989</td>
<td align="right">0.352</td>
<td align="right">-31.258</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">City:mixed metro</td>
<td align="right">-8.656</td>
<td align="right">0.369</td>
<td align="right">-23.439</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">NOC:1</td>
<td align="right">-12.696</td>
<td align="right">0.424</td>
<td align="right">-29.920</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">NOC:2</td>
<td align="right">-21.597</td>
<td align="right">0.653</td>
<td align="right">-33.074</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">NOC:3</td>
<td align="right">-26.090</td>
<td align="right">1.290</td>
<td align="right">-20.227</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">NOC:4</td>
<td align="right">-29.009</td>
<td align="right">2.963</td>
<td align="right">-9.789</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">NOC:5</td>
<td align="right">-19.443</td>
<td align="right">6.433</td>
<td align="right">-3.022</td>
<td align="right">0.003</td>
</tr>
<tr class="even">
<td align="left">NOC:6</td>
<td align="right">-38.824</td>
<td align="right">22.740</td>
<td align="right">-1.707</td>
<td align="right">0.088</td>
</tr>
<tr class="odd">
<td align="left">NOC:9</td>
<td align="right">-37.685</td>
<td align="right">32.158</td>
<td align="right">-1.172</td>
<td align="right">0.241</td>
</tr>
</tbody>
</table>
<p><strong>Findings:</strong> The two regression models show a significantly difference in the coefficient of income, and this might suggest several discrimination.</p>
</div>
</div>
<div id="model-diagnostics" class="section level3">
<h3>Model Diagnostics</h3>
<p><img src="final_report_files/figure-html/unnamed-chunk-6-1.png" width="90%" /></p>
<p><strong>Findings:</strong> The residuals are not quite normally distributed especially near both ends. Residuals are shown with a mean of 0. A few outliers are observed in the “Residuals vs Leverage” plot, and one of them has influenced the accuracy of regression given the large cook’s distance. Plus, residuals are biased around the horizontal line. Thus, the assumptions of linear models are not completely supported.</p>
</div>
<div id="logit-transformation" class="section level3">
<h3>Logit Transformation</h3>
<p>Given the results of linear regression with raw data, the following analysis is based on transformed percent values. Original values of 0 and 1 are transformed to “-Inf” and “Inf” respectively, thus cannot be included in regression analysis.</p>
<p><span class="math display">\[ percent^* = \beta_0 + \beta_1income + \beta_2race + \beta_3city + \beta_4noc\]</span> Transformation: <span class="math display">\[ percent^* = log(\frac{percent}{100-percent})\]</span></p>
<p><img src="final_report_files/figure-html/unnamed-chunk-7-1.png" width="90%" /></p>
<p><strong>Findings:</strong> After transformation and filtration of data, the residuals are distributed approximately normal as compared to the previous distribution, even though some points near the bottom still don’t fit well. The variance seems constant, and no more influential outliers are observed in this case.</p>
<p><strong>Regression Findings:</strong> The outcome of interest in this study is the attendance rate which is composed of percentage values inflated with 0 and 1. According to the model diagnosis, the linear regression is not a quite good choice to analyze data, and the results of MLR could be doubtful.<br />
The logit transformation provides a better distribution of residuals, while the results are still biased because the data excludes percent of 0 and 1, which will make great influence on predicting certain subgroups’ outcome, such as African Americans.<br />
A future research question similar to our topic would be if going to college is related to different characteristics, and in this case, a logistic regression could be done in a more straightforward way.</p>
</div>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>In this project, we explored multiple factors that are responsible for the change in the college attendance rate, and got several insights about these factors.</p>
<ul>
<li>The metropolitan status significantly influenced the college enrollment status.<br />
</li>
<li>There is a strong association between the income and the attendance rate if we do not adjusted any other factors. However, the statistical analysis told us if we keep race, number of children, metropolitan status fixed, the coefficient of the income is really not significant. More interestingly, if we further stratified this model by race, we could find a strong association in the African-American group, and this could either indicate these two factors are correlated, or indicate discrimination and income inequality.<br />
</li>
<li>Surprisingly, the increasing in income actually decreasing the college attendance rate among white families if we keep other factors fixed.<br />
</li>
<li>With the visualization of states, we found that though several states have a constantly low/high attendance rate, the attendance rates of most of states changed a lot during different years.</li>
</ul>
<p>College attendance rate matters, especially when some groups are prioritizing. We could see from this report that there is discrimination in college education. If you want to see more resources and donate, you can come to <a href="https://edtrust.org/">the Education trust</a>.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
